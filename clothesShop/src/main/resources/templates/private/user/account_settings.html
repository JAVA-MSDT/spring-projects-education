<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml"
      th:with="hasAdminRule=${@securityUtils.hasRole('ROLE_ADMIN')}"
      lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous">
    <title sec:authorize="!isAuthenticated()">Clothes Shop | Customers</title>
    <title sec:authorize="isAuthenticated()" th:text="${#authentication.name} + ' Profile' "></title>
</head>
<body>
<div th:replace="~{shared/header :: header}"></div>
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-sm-2">
            <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist"
                 aria-orientation="vertical">
                <button class="btn btn-link text-start" id="v-pills-home-tab" data-bs-toggle="pill"
                        data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home"
                        aria-selected="true">Contact Info
                </button>
                <button class="btn btn-link text-start" id="v-pills-profile-tab" data-bs-toggle="pill"
                        data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile"
                        aria-selected="false">Change Email
                </button>
                <button class="btn btn-link text-start" id="v-pills-disabled-tab" data-bs-toggle="pill"
                        data-bs-target="#v-pills-disabled" type="button" role="tab" aria-controls="v-pills-disabled"
                        aria-selected="false">Change Password
                </button>
                <button class="btn btn-link text-start" id="v-pills-messages-tab" data-bs-toggle="pill"
                        data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages"
                        aria-selected="false">Linked Accounts
                </button>
                <button class="btn btn-link text-start" id="v-pills-settings-tab" data-bs-toggle="pill"
                        data-bs-target="#v-pills-settings" type="button" role="tab" aria-controls="v-pills-settings"
                        aria-selected="false">Email Preferences
                </button>
            </div>
        </div>
        <div class="col-sm-10">
            <div class="tab-content" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                     aria-labelledby="v-pills-home-tab" tabindex="0">
                    <h2>Contact Info</h2>
                    <hr>
                </div>
                <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab"
                     tabindex="0">
                    <h2>Change Email</h2>
                    <hr>
                </div>
                <div class="tab-pane fade" id="v-pills-disabled" role="tabpanel" aria-labelledby="v-pills-disabled-tab"
                     tabindex="0">
                    <h2>Change Password</h2>
                    <hr>
                </div>
                <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab"
                     tabindex="0">
                    <h2>Linked Accounts</h2>
                    <hr>
                </div>
                <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab"
                     tabindex="0">
                    <h2>Email Preferences</h2>
                    <hr>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{shared/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
<script>
    const uploadProfileImageForm = document.getElementById("upload-customer-profile-image-form");
    const triggerProfileUpdateBtn = document.getElementById("update-customer-profile-image-trigger");
    const uploadBannerImageForm = document.getElementById("upload-customer-banner-image-form");
    const triggerBannerUpdateBtn = document.getElementById("update-customer-banner-image-trigger");

    function showUploadCustomerProfileImage() {
        uploadProfileImageForm.style.display = "block"
        triggerProfileUpdateBtn.style.display = "none";
    }

    function hideUploadCustomerProfileImage() {
        uploadProfileImageForm.style.display = "none"
        triggerProfileUpdateBtn.style.display = "block";
    }

    function showUploadCustomerBannerImage() {
        uploadBannerImageForm.style.display = "block"
        triggerBannerUpdateBtn.style.display = "none";
    }

    function hideUploadCustomerBannerImage() {
        uploadBannerImageForm.style.display = "none"
        triggerBannerUpdateBtn.style.display = "block";
    }

    document.addEventListener("DOMContentLoaded", function () {
        const hash = window.location.hash;
        if (hash) {
            const tabButton = document.querySelector(`button[data-bs-target="${hash}"]`);
            if (tabButton) {
                const tab = new bootstrap.Tab(tabButton);
                tab.show();
            }
        }
    });

    function activateUpdate() {
        let submitBasicDetailsBtn = document.getElementById("update-details-btn");
        let updateDetailsTrigger = document.getElementById("update-details-trigger");
        let basicDetailsInputs = document.getElementsByClassName("update-details-input");

        if (submitBasicDetailsBtn.disabled === true) {
            submitBasicDetailsBtn.disabled = false;
            submitBasicDetailsBtn.type = "submit";

            updateDetailsTrigger.innerText = "Cancel Update"
            updateDetailsTrigger.classList.remove("btn-info")
            updateDetailsTrigger.classList.add("btn-warning")
        } else {
            submitBasicDetailsBtn.disabled = true;
            submitBasicDetailsBtn.type = "hidden";

            updateDetailsTrigger.innerText = "Update Details";
            updateDetailsTrigger.classList.add("btn-info")
            updateDetailsTrigger.classList.remove("btn-warning")
        }

        Array.from(basicDetailsInputs)
            .forEach(input => {
                if (input.disabled) {
                    input.disabled = false;
                    input.classList.remove("border-0")
                } else {
                    input.disabled = true;
                    input.classList.add("border-0")
                }
            })
    }
</script>
</body>
</html>